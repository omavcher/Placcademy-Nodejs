<%= layout("/layouts/boilerplate") %>
<style>
    html,body{
    width: 100%;
    height: 100%;
}

.notification-bar{
    width: 100%;
    height: 4.5rem;
    display: flex;
    align-items: center;
    justify-content: end;
}
.referral-btn-box{
    height: 2.5rem;
    width: 2.5rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1.5vw;
    box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px, rgba(0, 0, 0, 0.3) 0px 1px 3px -1px;
}
.referral-btn-box:hover{
    box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;
}
.referral-btn-box img{
    width: 70%;
    height: 70%;
}
.notitfication-btn{
    cursor: pointer;
    width: 3.5rem;
    height: 3.5rem;
    background-color: #992F04;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-right: 10vw;
    position: relative;
    box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;
}
.notitfication-btn:hover{
    box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;
}
.notifi-count{
    width: 1.5rem;
    height: 1.5rem;
    background-color: #039B13;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;
    top: 0;
    right: -10%;
    position:absolute;
}
.notitfication-btn img{
    width: 2rem;
    height: 2rem;
}
.profile-box{
    width: 100%;
    height: auto;
    display: flex;
    padding-bottom: 5rem;
}
.user-p-info{
    width: 30%;
    height: 100%;
    display: flex;
    flex-direction: column;
}
.inership-info{
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    /* background-color: aquamarine; */
}
.profile-dp{
    width: 20rem;
    height: 20rem;
    border-radius: 50%;
    background-color: maroon;
    border: 2px solid black;
    margin-left: 5rem;
}
.profile-dp img{
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}
.profile-info-area{
    width: 100%;
    height: auto;
    display: flex;
    flex-direction: column;
}
.profile-info-area h1{
    font-size: 3rem;
    font-weight: 500;
    margin-left: 3rem;
    margin-top: 2.5rem;
}
.profile-info-area p{
 width: 20rem;
 height: auto;
 font-size: 1.3rem;
 margin-left: 3rem;
 margin-top: 1rem;
 text-align: justify;
 text-align: start;
}
.profile-info-area button{
    background-color: #FD682C;
    padding: 0.5rem 1rem 0.5rem 1rem;
    font-size: 1.3rem;
    font-weight: 500;
    border-radius: 0.4rem;
    margin-left: 3rem;
    margin-top: 1.5rem;
}
.profile-links{
    margin-top: 1.3rem;
}
#profile-links-ul{
  width: 10rem;
  display: flex;
  margin-left: 3rem;
  align-items: center;
  justify-content: start;
}

#profile-links-ul a{
   display: flex;
   align-items: center;
   justify-content: center;
   font-size: 1.5rem;
   cursor: pointer;
   margin-top: 0.5rem;
}
.profile-links-img{
    width: 1.5rem;
    height: 1.5rem;
    margin-right: 0.5rem;
}

.inership-info-panel{
    margin-top: 3rem;
    width: 48vw;
    height: 30rem;
    border: 1.5px solid black;
    border-radius: 20px;
    background-color: #FFE1D4;
}
.notification-pannel{
    width: 100%;
    height: 100%;
    display: flex;
    position: fixed;
    background-color: #992F04;
    display: none;
    top: 7%;
    overflow-y: scroll;
   
   
}


.container {
    max-width: 600px;
    margin: 0 auto;
    padding: 20px;
}

.filter-buttons {
    display: flex;
    justify-content: start;
    margin-bottom: 20px;
    gap: 2rem;
}

.filter-btn {
    padding: 10px 20px;
    border: none;
    background-color: #D9D9D9;
    color: black;
    font-weight: bold;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s ease;
}

.filter-btn:hover {
    background-color: #9f9f9f;
}

.notifications {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding-bottom: 10rem;
}

.notification {
    background-color: #ff8c66;
    padding: 15px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.notification img {
    width: 50px;
    height: 50px;
    margin-right: 15px;
}

.notification p {
    flex-grow: 1;
    margin: 0;
}

.badge {
    background-color: green;
    color: #fff;
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 0.8em;
    margin-right: 1.5rem;
}

.time {
    font-size: 0.8em;
    color: #ddd;
}

.inership-container {
    background-color: #ffffff;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    padding: 20px;
    max-width: 500px;
    width: 100%;
}

.header {
    text-align: center;
}

.header h2 {
    margin: 0;
    font-size: 24px;
    color: #333;
}

.score {
    display: flex;
    justify-content: space-around;
    margin: 20px 0;
    text-align: center;
}

.score div {
    font-size: 24px;
    color: #333;
}

.task-list {
    background-color: #333;
    border-radius: 10px;
    padding: 10px;
    color: #fff;
}

.task-list h3 {
    margin: 0 0 10px 0;
    font-size: 18px;
    color: #FFA500;
    text-align: center;
}

.task-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #444;
    border-radius: 5px;
    padding: 10px;
    margin-bottom: 10px;
}

.task-item button {
    background-color: #FFA500;
    border: none;
    color: white;
    padding: 5px 10px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.task-item button:hover {
    background-color: #cc8400;
}

.progress-bar {
    height: 10px;
    border-radius: 5px;
    background-color: #444;
    margin: 10px 0;
}

.progress {
    height: 100%;
    border-radius: 5px;
    background-color: #32CD32;
    width: 70%; /* Change this percentage to update progress */
}

.submit-container {
    text-align: center;
    margin-top: 10px;
}

.submit-container button {
    background-color: #FB4B04;
    border: none;
    color: white;
    padding: 10px 20px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.submit-container button:hover {
    background-color: #e04303;
}

@media (max-width: 768px) {
    .container {
        padding: 15px;
    }

    .header h2 {
        font-size: 20px;
    }

    .score div {
        font-size: 20px;
    }

    .task-item button {
        padding: 5px;
    }
}





.inership-info-panel{
    margin-top: 3rem;
    width: 48vw;
    height: auto;
    padding-bottom: 1.5rem;
    border: 1.5px solid black;
    border-radius: 20px;
    background-color: #FFE1D4;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}


.header {
    text-align: center;
}

.header h2 {
    margin: 0;
    font-size: 24px;
    color: #333;
    font-weight: 700;
}

.score {
    display: flex;
    justify-content: space-around;
    margin: 20px 0;
    text-align: center;
}

.score div {
    font-size: 24px;
    color: #333;
}

.task-list {
    width: 95%;
    background-color: #333;
    border-radius: 10px;
    padding: 10px;
    color: #fff;
    margin-left: auto;
    margin-right: auto;
}

.task-list h3 {
    margin: 0 0 10px 0;
    font-size: 18px;
    color: white;
    text-align: center;
}

.task-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #444;
    border-radius: 5px;
    padding: 10px;
    margin-bottom: 10px;
}

.task-item button {
    background-color: #ff520e;
    border: none;
    color: white;
    padding: 5px 10px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.task-item button:hover {
    background-color: #cc0000;
}

.progress-bar {
    height: 10px;
    border-radius: 5px;
    background-color: #444;
    margin: 10px 0;
}

.progress {
    height: 100%;
    border-radius: 5px;
    background-color: #32CD32;
    width: 70%; /* Change this percentage to update progress */
}

.submit-container {
    text-align: center;
    margin-top: 10px;
}

.submit-container button {
    background-color: #FB4B04;
    border: none;
    color: white;
    padding: 10px 20px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.submit-container button:hover {
    background-color: #e04303;
}









@media only screen
and (min-device-width : 320px)
and (max-device-width : 615px) {
    .profile-box{
        flex-direction: column;
        align-items: center;
    }

    .user-p-info{
        width: 100%;
        align-items: center;
    }
    
    .inership-info{
        /* background-color: #039B13; */
    }

    .profile-dp{
        margin-left: 0;
        width: 8rem;
        height: 8rem;
        
    }
    .profile-info-area{
        align-items: center;
    }
    .profile-info-area h1{
        font-size: 1.5rem;
        margin-top: 1rem;
        margin-left: auto;
        margin-right: auto;
    }
    .profile-info-area p{
     width: 18rem;
     font-size: 1.1rem;
     margin-left: auto;
     margin-right: auto;
     margin-top: 1rem;
     text-align: justify;
     text-align: center;
    }
    .profile-info-area button{
 font-size: 1.3rem;
 margin-left: auto;
 margin-right: auto;
    }

    #profile-links-ul{
        margin-right: auto;
        margin-left: auto;
    }

    .referral-btn-box{
        height: 2rem;
        width: 2rem;
       margin-right: 1rem;
    }

    .notitfication-btn{
        width: 3rem;
        height: 3rem;
    }
    .inership-info-panel{
        margin-top: 3rem;
        width: 18rem;
        height: auto;
        border: 1.5px solid black;
        border-radius: 20px;
        background-color: #FFE1D4;
        margin-right: auto;
    }
    
    .notification-pannel{
        top: 10%;
    }


    


}

@media (min-width: 350px) {
    .inership-info-panel{
        margin-right: 1.5rem;
    }
}
.test_pop_container {
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #a17a00;
        color: white;
        padding: 10px 20px;
        position: relative;
        justify-content: center;
    }

   
    .test-btn {
        background-color: #ccc;
        color: black;
        padding: 5px 10px;
        text-decoration: none;
        border-radius: 5px;
        margin-left: 10px;
    }

    .test-btn:hover {
        background-color: #bbb;
    }

</style>

<% if((user.internship.testallow) === true  && user.testScore === ''){ %>
<div class="test_pop_container">
    <div class="message">
        Take MCQ test to unlock internship 
    </div>
    <a href="/internships/test" class="test-btn">TEST</a>
</div>
<% } %>

<div class="notification-pannel">
    <div class="container">
        <div class="filter-buttons">
            <button class="filter-btn" data-filter="all">All</button>
            <button class="filter-btn" data-filter="tasks">Tasks</button>
            <button class="filter-btn" data-filter="payment">Payment</button>
        </div>
        <div class="notifications">

            <% notifications.forEach(notification => { %>
                <% if(notification.category === 'payment') { %>
                    <div class="notification payment">
                        <img src="/src/icons/Money Note.png" alt="Payment">
                        <p><%= notification.message %></p>
                        <span class="time"><%= new Date(notification.noti_date).toLocaleDateString() %></span>
                    </div>
                <% } else if(notification.category === 'tasks') { %>
                    <div class="notification tasks">
                        <img src="/src/icons/construction worker holding drill machine.png" alt="Task">
                        <p><%= notification.message %></p>
                        <span class="time"><%= new Date(notification.noti_date).toLocaleDateString() %></span>
                    </div>
                <% } else { %>
                    <div class="notification task">
                        <p><%= notification.message %></p>
                        <span class="time"><%= new Date(notification.noti_date).toLocaleDateString() %></span>
                    </div>
                <% } %>
            <% }) %>
        </div>
    </div>
</div>


<div class="notification-bar">
   <a href="/profile/referral"> 
    <div class="referral-btn-box">
       <img src="/src/icons/gift-icon.png" alt="referral-gift-btn">
   </div>
</a>
   <div class="notitfication-btn">
    <div class="notifi-count"></div>
    <img src="/src/icons/notifi-bell.png" alt="Notifi Bell">
   </div>
</div>

<div class="profile-box">
    <div class="user-p-info">
     <div class="profile-dp">
            <img src="<%= user.profile_dp %>" alt="profile-picture">    
     </div>
   
     <div class="profile-info-area">
        <h1><%= user.username %></h1>
        <p><%= user.bio %></p>
        <form method="get" action="/profile/<%= user._id %>/edit">
            <button>Edit Profile</button>
        </form>
    

     <div class="profile-links">
        <ul>
            <% if (user.location) { %>
                <li id="profile-links-ul">
                    <a href="https://www.google.com/maps/place/<%= user.location %>">
                        <img class="profile-links-img" src="/src/icons/marker.png" alt="location">
                        <%= user.location %>
                    </a>
                </li>
            <% } %>
        
            <% if (user.collegeName) { %>
                <li id="profile-links-ul">
                    <a href="https://www.google.com/search?q=<%= user.collegeName %>">
                        <img class="profile-links-img" src="/src/icons/collage.png" alt="college">
                        <%= user.collegeName %>
                    </a>
                </li>
            <% } %>
        
            <% if (user.instagramId) { %>
                <li id="profile-links-ul">
                    <a href="https://www.instagram.com/<%= user.instagramId %>">
                        <img class="profile-links-img" src="/src/icons/instagram(c).png" alt="instagram">
                        <%= user.instagramId %>
                    </a>
                </li>
            <% } %>
        
            <% if (user.linkedinId) { %>
                <li id="profile-links-ul">
                    <a href="https://www.linkedin.com/in/<%= user.linkedinId %>">
                        <img class="profile-links-img" src="/src/icons/linkedin(c).png" alt="linkedin">
                        <%= user.linkedinId %>
                    </a>
                </li>
            <% } %>
        </ul>
        
     </div>


    </div for="user-p-info"> </div>





    <div class="inership-info">

        <% if(user.internshipName){ %>
        <div class="inership-info-panel">
            <div class="header">
                <h2>Recent Test Score</h2>
            </div>
            <div class="score">
                <div>
                    <p>60/80</p>
                    <p>Marks</p>
                </div>
                <div>
                    <p>12</p>
                    <p>Rank</p>
                </div>
            </div>
            <div class="task-list">
                <h3><span style="color: #FB4B04; font-size: 0.9rem;">Fresher's Plan</span> &nbsp;  Front-End Web Development</h3>
                <div class="task-item">
                    <span>Task-1: Spotify Responsive Landing Page</span>
                    <button>Details</button>
                </div>
                <div class="task-item">
                    <span>Task-2: Prime Responsive Landing Page</span>
                    <button>Details</button>
                </div>
                <div class="task-item">
                    <span>Task-3: Jio Cinema Responsive Landing Page</span>
                    <button>Details</button>
                </div>
                <div class="progress-bar">
                    <div class="progress"></div>
                </div>
                <div class="duration">
                    <p>Duration: 07-03-2024 to 07-04-2024</p>
                </div>
            </div>
            <div class="submit-container">
                <button>Submit</button>
            </div>
<% }else{ %>


            <div class="plans-card">
                <span id="plans-card-heading"><h1>Limited Time Offer</h1></span>
                <div id="plans-card-title">
                    <h2>Fresherâ€™s Plan</h2>
                    <p>Kickstart Your Coding Journey with Internships</p>
                </div>
                <div style="margin-left: 1rem;" id="plans-card-list">
                <ul>
                    <li><img style="width: 1.2rem; height: 1.2rem;" src="/src/icons/tick-icon.png">Work on top industry-standard projects</li>
                    <li><img style="width: 1.2rem; height: 1.2rem;" src="/src/icons/tick-icon.png">Rated 4.3/5 by users</li>
                    <li><img style="width: 1.2rem; height: 1.2rem;" src="/src/icons/tick-icon.png">Boost your current coding skills</li>
                    <li><img style="width: 1.2rem; height: 1.2rem;" src="/src/icons/tick-icon.png">100% Free for a limited time</li>
                </ul>
                </div>
                <form action="/">
                    <button id="try-nowbtn">Try free test</button>
                </form>
                </div>
            
<% } %>


     </div>

    </div for="inership-info">


</div for="profile-box">
<script>
document.querySelector(".notitfication-btn").addEventListener("click", function() {
    const notificationPannel = document.querySelector(".notification-pannel");
    if (notificationPannel.style.display === "block") {
        notificationPannel.style.display = "none";
        document.body.style.overflow = "auto";
    } else {
        notificationPannel.style.display = "block";
        document.body.style.overflow = "hidden";
    }
});

document.addEventListener("DOMContentLoaded", function() {
    const filterButtons = document.querySelectorAll(".filter-btn");
    const notifications = document.querySelectorAll(".notification");
    const notificationCount = document.querySelector(".notifi-count");

    // Update notification count
    notificationCount.textContent = notifications.length;

    filterButtons.forEach(button => {
        button.addEventListener("click", () => {
            const filter = button.getAttribute("data-filter");

            let visibleCount = 0;

            notifications.forEach(notification => {
                if (filter === "all" || notification.classList.contains(filter)) {
                    notification.style.display = "flex";
                    visibleCount++;
                } else {
                    notification.style.display = "none";
                }
            });

            // Update notification count based on the filter
            notificationCount.textContent = visibleCount;
        });
    });
});


</script>